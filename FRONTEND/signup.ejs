<%- include('header.ejs') %>

<div class="main-content">
    <h2 style="text-align: center;">Signup</h2>
        <form id="signupForm">
            <input type="text" id="name" placeholder="Full Name" required>
            <input type="email" id="email" placeholder="Email" required>
            <input type="tel" id="phone" placeholder="Phone" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Signup</button>
        </form>
        <p>Already have an account? <a href="/">Login</a></p>
    </div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("signupForm");

        form.addEventListener("submit", e => {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;
            const password = document.getElementById("password").value;

            // Load existing users from localStorage
            let users = JSON.parse(localStorage.getItem("users")) || [];

            // Check if email already exists
            if (users.find(user => user.email === email)) {
                alert("User with this email already exists!");
                return;
            }

            // Add new user
            users.push({ name, email, phone, password });

            // Save back to localStorage
            localStorage.setItem("users", JSON.stringify(users));

            alert("Signup successful! Please login.");
            window.location.href = "/login";
        });
    });
</script>


    <%- include('footer.ejs') %>